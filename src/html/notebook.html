<!doctype html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <title>Tungsteno - Loading...</title>
    <meta name="description" content="Tungsteno Notebook 1.0">
    <meta name="author" content="JoseCarlosGarcia95">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css"
        integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog=="
        crossorigin="anonymous" />

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Open+Sans&display=swap');
    </style>
    <link rel="stylesheet" href="%css_min_build_file%">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="%js_min_build_vendor%" type="text/javascript"></script>
    <script src="%js_min_build_app%" type="text/javascript"></script>
</head>

<body data-app="notebook">
    <nav>
        <ul>
            <li><i class="fas fa-atom"></i> Tungsteno v1</li>
            <!--
            <li><a><i class="far fa-file"></i> File</a>
                <ul>
                    <li><i class="far fa-save"></i> Save notebook
                    </li>
                </ul>
            </li>
        -->
        </ul>
    </nav>


    <div class="notebook" v-cloak>
        <transition-group name="list" tag="p">

            <div class="cell" v-for="cell in cells" v-bind:key="cell.cell_id">
                <div class="caption">
                    <ul>
                        <li class="title">#{{ cell.cell_id }}</li>
                        <li class="run-cell" v-on:click="cell.evaluate()" v-if="!cell.loading"><i
                                class="fas fa-play"></i>
                        </li>
                        <!--
                        <li class="stop-cell" v-on:click="cell.evaluate()" v-if="cell.loading"><i
                                class="fas fa-stop"></i>
                        </li>
                        -->

                        <li class="run-visibility" v-on:click="cell.hideInput()"><i class="far fa-eye"></i></li>
                        <!--
                        <li class="run-settings"><i class="fas fa-cog"></i></li>
                        -->
                        <li>
                            <ul class="smart-ac">
                                <li v-for="(suggestion, index) in cell.suggestions"
                                    v-on:click="cell.autocompleteIndex(index)">
                                    {{ suggestion.caption }}
                                </li>
                                <li>?</li>
                            </ul>
                        </li>
                    </ul>
                </div>


                <contenteditable spellcheck=" false" v-if="!cell.hide_input" class="input" tag="div"
                    :contenteditable="true" v-model="cell.input" @keyup.shift.13="cell.evaluate"
                    v-on:keydown.tab="cell.autocomplete" @keypress="disableShiftEnter"
                    v-on:keypress="cell.refreshSuggestions()">
                </contenteditable>

                <transition name="fade">
                    <div v-bind:class="'cell_container_' + cell.output_type" class="output"
                        v-if="cell.output_type != null || cell.loading">
                        <sync-loader style="text-align: center; padding: 10px" :loading="cell.loading" :size="5"
                            :sizeUnit="px" :color="loading_color"></sync-loader>
                        <template v-if="!cell.loading">
                            <div v-html="cell.output" v-if="cell.output_type == 'default'">
                                {{ cell.output }}
                            </div>
                            <div v-html="cell.output" class="error" v-if="cell.output_type == 'error'">
                                {{ cell.output }}
                            </div>
                            <template v-if="cell.output_type == 'plot'">
                                <plotly :data="cell.plot.data" :options="cell.plot.options"></plotly>
                            </template>
                        </template>
                    </div>
                </transition>
            </div>
        </transition-group>
    </div>



    <script type="text/javascript" src="/eel.js"></script>

    <script type="text/javascript">
        window.onload = (async function () {
            let bodyElement = document.getElementsByTagName('body')[0];
            let evaluator, suggestions, eel_configuration = {};

            if (typeof eel !== 'undefined') {
                evaluator = null;
                suggestions = null;
                eel_configuration = await eel.get_eel_configuration()();
            } else {
                evaluator = function (code) {
                    return function (callback) {
                        let response = {};

                        response.processor = 'default';
                        response.output = code;

                        callback(response);
                    }
                }

                suggestions = function (input) {
                    return function () {
                        return Promise.resolve([{
                            caption: "Integrate",
                            append: "egrate"
                        }])
                    }

                }
            }

            let options = {
                app: bodyElement.dataset.app,
                evaluator,
                suggestions,
                eel_configuration
            }

            window.tungsteno = new Tungsteno(options);
        });
    </script>
</body>

</html>